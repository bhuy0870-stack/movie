{% extends "admin/change_list.html" %}
{% load static %}
{% block content_title %} 
    <div style="margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 15px;">
        <h1 class="mb-0 text-white" style="font-weight: 800; font-size: 26px;">
            <i class="fas fa-users text-primary"></i> QUáº¢N LÃ THÃ€NH VIÃŠN
        </h1>
    </div>
{% endblock %}

{% block result_list %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    .stat-card{background:linear-gradient(145deg, #1e1e1e, #252525);padding:20px;border-radius:12px;border:1px solid rgba(255,255,255,0.05);text-align:center;color:#fff;box-shadow:0 4px 10px rgba(0,0,0,0.2);} 
    .chart-box{background:#1e1e1e;padding:20px;border-radius:12px;border:1px solid rgba(255,255,255,0.05); box-shadow:0 4px 10px rgba(0,0,0,0.2);}
    .card-title-lg { font-size: 2.5rem; margin: 0; font-weight: 800; }
    .card-sub { color: #aaa; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; margin-top: 5px; }
</style>

<div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:20px; margin-bottom:30px;">
    <div class="stat-card">
        <h2 class="card-title-lg" style="color:#0d6efd;">{{ stats.total_users }}</h2>
        <div class="card-sub">Tá»”NG USER</div>
    </div>
    <div class="stat-card">
        <h2 class="card-title-lg" style="color:#198754;">{{ stats.active_users }}</h2>
        <div class="card-sub">ÄANG HOáº T Äá»˜NG</div>
    </div>
    <div class="stat-card">
        <h2 class="card-title-lg" style="color:#ffc107;">+{{ stats.new_month }}</h2>
        <div class="card-sub">Má»šI THÃNG NÃ€Y</div>
    </div>
</div>

<div style="display:grid; grid-template-columns: 2fr 1fr; gap:20px; margin-bottom:30px;">
    <div class="chart-box">
        <h4 style="color:#e0e0e0; margin-bottom:20px; border-left:4px solid #0d6efd; padding-left:10px;">ğŸ“ˆ TÄƒng trÆ°á»Ÿng thÃ nh viÃªn</h4>
        <div style="height:280px;"><canvas id="uLine"></canvas></div>
    </div>
    <div class="chart-box">
        <h4 style="color:#e0e0e0; margin-bottom:20px; border-left:4px solid #198754; padding-left:10px;">ğŸ• Tráº¡ng thÃ¡i</h4>
        <div style="height:280px;"><canvas id="uPie"></canvas></div>
    </div>
</div>

<script>
    Chart.defaults.color = '#bbb';
    new Chart(document.getElementById('uLine'), {
        type:'line',
        data:{
            labels:{{stats.line_labels|safe}},
            datasets:[{
                label:'New Users',
                data:{{stats.line_data|safe}},
                borderColor:'#0d6efd',
                backgroundColor:'rgba(13,110,253,0.1)',
                borderWidth: 2, tension: 0.3, fill:true, pointRadius: 4
            }]
        },
        options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{grid:{display:false}},y:{grid:{color:'#333'}}}}
    });
    new Chart(document.getElementById('uPie'), {
        type:'doughnut',
        data:{
            labels:{{stats.pie_labels|safe}},
            datasets:[{data:{{stats.pie_data|safe}},backgroundColor:['#198754','#dc3545'],borderWidth:0, hoverOffset: 4}]
        },
        options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{color:'#ccc', padding: 20}}}}
    });
</script>
{{ block.super }}
{% endblock %}